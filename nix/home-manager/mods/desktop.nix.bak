{ lib, pkgs, config, ... }: {

  options = {
    desktop = {
      enable = lib.mkEnableOption "auto configure this desktop";};
      games.enable = lib.mkEnableOption "Enable Gaming programs";
      media.enable = lib.mkEnableOption "Enable media programs";
  };

  config = lib.mkIf config.desktop.enable {
    hibernateDesktop = pkgs.makeDesktopItem {
      name = "Hibernate";
      desktopName = "Hibernate";
      exec = "${pkgs.pmutils}/bin/pm-hibernate";
      terminal = false;
    };

  desktopBase = with pkgs; [
      scrot
      flameshot
      keepassxc
      xdg-utils
      dunst
      gotop # better htop
      recoll
      nim
      nimble
    ];

  };
}
